\documentclass{hw_report}
\usepackage{booktabs}
\usepackage{rotating}
\newcommand{\keff}{k_{\text{eff}}}

\onehalfspacing

\title{\textbf{Computer Project 1}\\ \vspace{1em}
NPRE 555: Reactor Theory I}
\author{Liam Pohlmann\\Nuclear, Plasma, \& Radiological Engineering, University of Illinois Urbana-Champaign\\\url{liamp2@illinois.edu}}

\date{\textbf{Due: 6 October 2025}}

\begin{document}
    \maketitle
%\tableofcontents
%\clearpage

    \begin{abstract}

    \end{abstract}


    \section{Premise}
    The purpose of this paper is to outline the methods used to determine a $k$-eigenvalue solution along with a flux profile for a simple slab of two fissile material in 1-D cartesian, monoenergetic


    \section{Theory}

    \begin{equation}
        \label{eq:k-sample}
        k_\text{gen}=\frac{\text{Number of Neutrons Produced}}{\text{Number of Source Neutrons}}
    \end{equation}
    \begin{equation}
        \label{eq:keff}
        \keff \approx \sum_{i=1}^{N} \hat{k}_i
    \end{equation}
    The variance of $\keff$ must be calculated differently because it is the variance of \textit{mean}.
    To handle this special case, it can be shown~\cite{ 244MeanVariance} that the variance scales with an additional factor of $1/N$:
    \begin{equation}
        \label{eq:variance-of-the-mean-of-k}
        \sigma^2_k=\frac{1}{N(N-1)}\sum_{i=1}^{N} \left( k_i-\hat{k} \right)^2
    \end{equation}

    \begin{equation}
        \label{distance to boundary}
        d_b = \frac{x_n-x_b}{\mu}
    \end{equation}
    where $\mu=\cos\theta$.


    \section{Code Design}
    A code was written in \texttt{C++} to fascilite the computations of arbitrary 1D regions either connected or separated by a void.
    It was designed to be as reusable and flexible as possible.
    Three major classes were created: \texttt{MCSlab}, \texttt{Region}, and \texttt{Neutron}.
    The first of these holds the major computational methods for $k$-eigenvalue and flux calculations, the second holds material and geometry information for each users-specified region, and the last holds information and methods pertaining to neutrons and their position within the simulation.
    A non-exhaustive list of code elements from each of these has been included along with a short description in \cref{tab: code classes}.
    \begin{sidewaystable}
        \centering
        \begin{tabular}{llll}
            \toprule
            \textbf{Class} & \textbf{Item}                   & \textbf{Type} & \textbf{Description}                                                                 \\
            \midrule
            MCSlab         & \texttt{k\_eigenvalue}           & Method                      & Holds random walk algorithm, tally calculations                                      \\

            & \texttt{readInput }             & Method                      & Read user-supplied input file and initialize attributes                              \\

            & \texttt{absorption}             & Method                      & If absorption occurs, calculate number of neutrons born and kill particle            \\

            & \texttt{scatter}                & Method                      & If scatter occurs, change the particleâ€™s direction                                   \\

            & \texttt{calculateK}             & Method                      & Calculate $k_{\text{gen}}$, $\keff$, and the standard deviation                      \\

            & \texttt{updatePathLengths}      & Method                      & For every movement, add the flight distance of the neutron to bins                   \\

            & \texttt{updateCollisions}       & Method                      & For every collision, add 1 to bin of collision location                              \\

            & \texttt{exportFlux}             & Method                      & Export flux values to \texttt{.csv} file                                             \\
            Region         & \texttt{\_Sigma\_s}               & Attribute                   & Scattering macroscopic cross section                                                 \\

            & \texttt{\_Sigma\_a}               & Attribute                   & Absorption macroscopic cross section                                                 \\

            & \texttt{\_nu\_Sigma\_f}            & Attribute                   & Fission macroscopic cross section multiplied by the number neutrons born per fission \\

            & \texttt{\_Sigma\_t}               & Attribute                   & Total macroscopic cross section                                                      \\

            & \texttt{\_n\_per\_fission}         & Attribute                   & Number of neutrons produced per absorption                                           \\

            & \texttt{populateCellLocs}       & Method                      & Populate cell centers and bounds within a single region                              \\
            Neutron        & \texttt{movePositionAndRegion}         & Method                      & Move neutron position and change its region accordingly                              \\

            & \texttt{setRandomStartPosition} & Method                      & Set a random start position within fissionable material                              \\

            & \texttt{distanceToCollisions}   & Method                      & Calculate the distance to next collision within region                               \\

            & \texttt{distanceToEdge}         & Method                      & Calculate the distance to the nearest edge in the direction of $\mu$                 \\

            & \texttt{\_is\_alive}              & Attribute                   & Boolean value holding whether particle is still alive                                \\

            & \texttt{kill}                   & Method                      & Switches \texttt{\_is\_alive} to \texttt{False}, terminating the walk                  \\
            \bottomrule
        \end{tabular}
        \caption{Major classes within code and their description}
        \label{tab: code classes}
    \end{sidewaystable}

    In addition, a flowchart has been provided in \cref{fig:flowchart} that outlines the steps taken in a single generation of neutrons.
    Note that after each generation, the Shannon-Entropy, running $\keff$ value, and standard deviation are reported to the user as commandline output.

    \begin{figure}[!htb]
        \centering
        \includegraphics[width=0.8\textwidth]{figs/MC-flowchart}
        \caption{Monte Carlo code flowchart for a single generation}
        \label{fig:flowchart}
    \end{figure}

    \section{Results}
    

    \begin{figure}[!htb]
        \centering
        \begin{subfigure}[b]{0.48\textwidth}
            \centering
            \includegraphics[width=\textwidth]{../MCSlab/examples/plot_submission_simulation_pl}
            \caption{Path length estimate}
            \label{submission_path_length}
        \end{subfigure}
        \hfill
        \begin{subfigure}[b]{0.48\textwidth}
            \centering
            \includegraphics[width=\textwidth]{../MCSlab/examples/plot_submission_simulation_col}
            \caption{Collision estimate}
            \label{submission_collision}
        \end{subfigure}
        \caption{Comparison of simulation estimates. $k_{\text{eff}}=1.183377 \pm 0.000328$}
        \label{fig:submission_combined}
    \end{figure}


    \section{Future Work}
    \bibliographystyle{plain}
    \bibliography{CP1}

    \clearpage

    \appendix


    \section{Additional Example Solutions}
    \begin{figure}[!htb]
        \centering
        \begin{subfigure}[b]{0.48\textwidth}
            \centering
            \includegraphics[width=\textwidth]{../MCSlab/examples/plot_1_region_pl}
            \caption{Single region path length estimate}
            \label{single_path_length}
        \end{subfigure}
        \hfill
        \begin{subfigure}[b]{0.48\textwidth}
            \centering
            \includegraphics[width=\textwidth]{../MCSlab/examples/plot_1_region_col}
            \caption{Single region collision estimate}
            \label{single_collision}
        \end{subfigure}
        \caption{Comparison of simulation estimates. $k_{\text{eff}}=1.183377 \pm 0.000328$}
        \label{fig:single_combined}
    \end{figure}

    \begin{figure}[!htb]
        \centering
        \begin{subfigure}[b]{0.48\textwidth}
            \centering
            \includegraphics[width=\textwidth]{../MCSlab/examples/plot_2_region_connected_pl}
            \caption{Double region connected path length estimate}
            \label{double_connected_path_length}
        \end{subfigure}
        \hfill
        \begin{subfigure}[b]{0.48\textwidth}
            \centering
            \includegraphics[width=\textwidth]{../MCSlab/examples/plot_2_region_connected_col}
            \caption{Double region connected collision estimate}
            \label{double_connected_collision}
        \end{subfigure}
        \caption{Comparison of simulation estimates. $k_{\text{eff}}=1.183377 \pm 0.000328$}
        \label{fig:double-connected-combined}
    \end{figure}


    \begin{figure}[!htb]
        \centering
        \begin{subfigure}[b]{0.48\textwidth}
            \centering
            \includegraphics[width=\textwidth]{../MCSlab/examples/plot_2_region_split_pl}
            \caption{Double region split path length estimate}
            \label{double_split_path_length}
        \end{subfigure}
        \hfill
        \begin{subfigure}[b]{0.48\textwidth}
            \centering
            \includegraphics[width=\textwidth]{../MCSlab/examples/plot_2_region_split_col}
            \caption{Double region split collision estimate}
            \label{double_split_collision}
        \end{subfigure}
        \caption{Comparison of simulation estimates. $k_{\text{eff}}=1.183377 \pm 0.000328$}
        \label{fig:double_split_combined}
    \end{figure}

\end{document}
